# Система обмена позитивным контентом
## Детали реализации

При запуске клиентского приложения инициализируется соединение к серверу. При подключении сервер отправляет клиенту сообщение с просьбой ввести nickname. После отправки nickname сервер добавляет поток общения с клиентом в массив для дальнейшей broadcast рассылки сообщений от других пользователей, а также высылает клиенту сообщение вида "Hello \<nickname\>". Далее общение происходит по разработанному протоколу, который описан ниже.
Когда клиент инициализировался на сервере, он может посылать в систему сообщения формата *"\<message\> -a \<attachment\>"*. При этом клиент имеет право послать только вложение, используя опцию *-a*, или только текст сообщения. Эти сообщения на клиентской стороне парсятся в сообщения формата разработанного протокола и отправляются на сервер. Сервер со своей стороны считывает эти сообщения, добавляет к ним время и отправляет сообщения в формате разработанного протокола всем клиентам, которые инициализировались в системе и ввели свой nickname. Клиентское приложение принимает сообщения от сервера, парсит их для корректного отображения в консоли, выводит сообщения в консоль в формате *"(\<time\>) [\<nickname\>] \<message\>"*, а также при наличии вложения сохраняет его в виде файла в директории tmp.

## Описание протокола
**Общий формат сообщения от клиента серверу**
```
<nickname>
<message>
<attName>
<attSize>
```
\<nickname\> - никнейм пользователя, посылающего сообщение
\<message\> - текст сообщения с подписанием прикрепленного вложения в скобках при его наличии
\<attName\> - название вложенного файла с его расширением
\<attSize\> - размер вложения

**Пример сообщения**
```
PrettyBoy2004
What's up? (hello.png attached)
hello.png
8096
```
****
**Общий формат сообщения от сервера клиентам**
```
<time>
<nickname>
<message>
<attName>
<attSize>
```
\<time\> - время сообщения, проставленное на сервере
\<nickname\> - никнейм пользователя, посылающего сообщение
\<message\> - текст сообщения с подписанием прикрепленного вложения в скобках при его наличии
\<attName\> - название вложенного файла с его расширением
\<attSize\> - размер вложения

**Пример сообщения**
```
14:54:52
PrettyBoy2004
What's up? (hello.png attached)
hello.png
8096
```
